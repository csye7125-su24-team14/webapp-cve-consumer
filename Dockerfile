FROM golang:1.22.3 AS BuildStage
 
WORKDIR /webapp-cve-consumer
 
COPY go.mod go.sum ./
 
RUN go mod download
 
COPY main.go  ./
 
COPY app ./app
 
RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o /build main.go

 
FROM alpine:latest AS build-release-stage
 
WORKDIR /
 
COPY --from=BuildStage /build /build

ENTRYPOINT [ "./build" ]